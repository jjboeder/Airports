{
  "version": 3,
  "sources": ["../../../owm-proxy.js", "../../../../../../.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../../../.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-z9upNm/middleware-insertion-facade.js", "../../../../../../.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/common.ts", "../bundle-z9upNm/middleware-loader.entry.ts"],
  "sourceRoot": "/Users/juha/GitHub/Airports/worker/.wrangler/tmp/dev-6sZqhb",
  "sourcesContent": ["export default {\n  async fetch(request, env) {\n    const url = new URL(request.url);\n    const path = url.pathname;\n\n    // CORS preflight\n    if (request.method === 'OPTIONS') {\n      return new Response(null, { headers: corsHeaders(request) });\n    }\n\n    // Route: /tile/:layer/:z/:x/:y.png (OWM 1.0 tiles)\n    const tileMatch = path.match(/^\\/tile\\/([a-z_]+)\\/(\\d+)\\/(\\d+)\\/(\\d+)\\.png$/);\n    if (tileMatch) {\n      const [, layer, z, x, y] = tileMatch;\n      const upstream = `https://tile.openweathermap.org/map/${layer}/${z}/${x}/${y}.png?appid=${env.OWM_KEY}`;\n      const resp = await fetch(upstream, {\n        cf: { cacheTtl: 600, cacheEverything: true }\n      });\n      const headers = new Headers(resp.headers);\n      Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n      return new Response(resp.body, { status: resp.status, headers });\n    }\n\n    // Route: /tile2/:layer/:z/:x/:y.png (OWM 2.0 weather maps with arrows)\n    const tile2Match = path.match(/^\\/tile2\\/([A-Z_]+)\\/(\\d+)\\/(\\d+)\\/(\\d+)\\.png$/);\n    if (tile2Match) {\n      const [, layer, z, x, y] = tile2Match;\n      const arrowStep = url.searchParams.get('arrow_step') || '16';\n      const useNorm = url.searchParams.get('use_norm') || 'true';\n      const date = url.searchParams.get('date') || '';\n      let upstream = `https://maps.openweathermap.org/maps/2.0/weather/${layer}/${z}/${x}/${y}?appid=${env.OWM_KEY}&arrow_step=${arrowStep}&use_norm=${useNorm}`;\n      if (date) upstream += `&date=${date}`;\n      const resp = await fetch(upstream, {\n        cf: { cacheTtl: 600, cacheEverything: true }\n      });\n      const headers = new Headers(resp.headers);\n      Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n      return new Response(resp.body, { status: resp.status, headers });\n    }\n\n    // Route: /taf?ids=EFHK,ESSA\n    if (path === '/taf') {\n      const ids = url.searchParams.get('ids') || '';\n      const icaoList = ids.split(',').filter(Boolean);\n      if (icaoList.length === 0 || icaoList.length > 10 || !icaoList.every(id => /^[A-Z]{4}$/.test(id))) {\n        return jsonError('ids must be 1-10 valid 4-letter ICAO codes', 400);\n      }\n      const upstream = `https://aviationweather.gov/api/data/taf?ids=${icaoList.join(',')}&format=json`;\n      const resp = await fetch(upstream, {\n        cf: { cacheTtl: 600, cacheEverything: true }\n      });\n      const headers = new Headers(resp.headers);\n      Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n      headers.set('Content-Type', 'application/json');\n      return new Response(resp.body, { status: resp.status, headers });\n    }\n\n    // Route: /metar?ids=EFHK,ESSA\n    if (path === '/metar') {\n      const ids = url.searchParams.get('ids') || '';\n      const icaoList = ids.split(',').filter(Boolean);\n      if (icaoList.length === 0 || icaoList.length > 50 || !icaoList.every(id => /^[A-Z]{4}$/.test(id))) {\n        return jsonError('ids must be 1-50 valid 4-letter ICAO codes', 400);\n      }\n      const cache = caches.default;\n      const cacheKey = new Request('https://metar-cache/' + icaoList.join(','));\n      let cached = await cache.match(cacheKey);\n      if (cached) {\n        const headers = new Headers(cached.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        return new Response(cached.body, { status: cached.status, headers });\n      }\n      const upstream = `https://metar.vatsim.net/metar.php?id=${icaoList.join(',')}`;\n      const resp = await fetch(upstream);\n      const body = await resp.text();\n      const cacheResp = new Response(body, {\n        headers: { 'Content-Type': 'text/plain', 'Cache-Control': 'max-age=300' }\n      });\n      await cache.put(cacheKey, cacheResp.clone());\n      const headers = new Headers(cacheResp.headers);\n      Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n      return new Response(body, { status: 200, headers });\n    }\n\n    // Route: /notams?icao=EFHK\n    if (path === '/notams') {\n      const icao = url.searchParams.get('icao') || '';\n      if (!/^[A-Z]{4}$/.test(icao)) {\n        return jsonError('icao must be a single 4-letter ICAO code', 400);\n      }\n      const cache = caches.default;\n      const cacheKey = new Request('https://notam-cache/' + icao);\n      let cached = await cache.match(cacheKey);\n      if (cached) {\n        const headers = new Headers(cached.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        return new Response(cached.body, { status: cached.status, headers });\n      }\n      const upstream = 'https://notams.aim.faa.gov/notamSearch/search';\n      const resp = await fetch(upstream, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n        body: 'searchType=0&designatorsForLocation=' + icao\n      });\n      const body = await resp.text();\n      const cacheResp = new Response(body, {\n        headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=1800' }\n      });\n      await cache.put(cacheKey, cacheResp.clone());\n      const headers = new Headers(cacheResp.headers);\n      Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n      return new Response(body, { status: 200, headers });\n    }\n\n    // Route: /route-wx?points=60.32,24.97,59.65,17.94,...\n    if (path === '/route-wx') {\n      const raw = url.searchParams.get('points') || '';\n      const nums = raw.split(',').map(Number);\n      if (nums.length < 2 || nums.length % 2 !== 0 || nums.some(isNaN)) {\n        return jsonError('points must be comma-separated lat,lon pairs', 400);\n      }\n      const points = [];\n      for (let i = 0; i < nums.length; i += 2) {\n        points.push({ lat: nums[i], lon: nums[i + 1] });\n      }\n      if (points.length > 10) {\n        return jsonError('max 10 points', 400);\n      }\n      const cache = caches.default;\n      const results = await Promise.all(points.map(async (pt) => {\n        const cacheKey = new Request('https://wind-cache/' + pt.lat + '/' + pt.lon);\n        let resp = await cache.match(cacheKey);\n        if (!resp) {\n          const upstream = `https://api.openweathermap.org/data/2.5/weather?lat=${pt.lat}&lon=${pt.lon}&appid=${env.OWM_KEY}&units=metric`;\n          resp = await fetch(upstream);\n          const body = await resp.text();\n          resp = new Response(body, { headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=600' } });\n          await cache.put(cacheKey, resp.clone());\n        }\n        return resp.json();\n      }));\n      return new Response(JSON.stringify(results), {\n        headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n      });\n    }\n\n    // Route: /wind-grid?bbox=south,west,north,east&step=2&latStep=0.67\n    if (path === '/wind-grid') {\n      const bbox = (url.searchParams.get('bbox') || '').split(',').map(Number);\n      const step = parseFloat(url.searchParams.get('step')) || 2;\n      const latStep = parseFloat(url.searchParams.get('latStep')) || step;\n      if (bbox.length !== 4 || bbox.some(isNaN)) {\n        return jsonError('bbox=south,west,north,east required', 400);\n      }\n      const [south, west, north, east] = bbox;\n      const points = [];\n      for (let lat = Math.ceil(south / latStep) * latStep; lat <= north; lat += latStep) {\n        for (let lon = Math.ceil(west / step) * step; lon <= east; lon += step) {\n          points.push({ lat: Math.round(lat * 1000) / 1000, lon: Math.round(lon * 1000) / 1000 });\n        }\n      }\n      if (points.length > 120) {\n        return jsonError('Too many grid points (' + points.length + '), increase step', 400);\n      }\n\n      // Fetch all points in parallel (no per-point caching to save subrequests)\n      const results = await Promise.all(points.map(async (pt) => {\n        const upstream = `https://api.openweathermap.org/data/2.5/weather?lat=${pt.lat}&lon=${pt.lon}&appid=${env.OWM_KEY}&units=metric`;\n        try {\n          const resp = await fetch(upstream, { cf: { cacheTtl: 600, cacheEverything: true } });\n          const data = await resp.json();\n          if (!data.wind) return null;\n          return {\n            lat: pt.lat, lon: pt.lon,\n            wind_speed: data.wind.speed,\n            wind_deg: data.wind.deg || 0,\n            wind_gust: data.wind.gust || null\n          };\n        } catch { return null; }\n      }));\n\n      return new Response(JSON.stringify(results.filter(Boolean)), {\n        headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=600', ...corsHeaders(request) }\n      });\n    }\n\n    // Route: /weather?lat=...&lon=...\n    if (path === '/weather') {\n      const lat = url.searchParams.get('lat');\n      const lon = url.searchParams.get('lon');\n      if (!lat || !lon || isNaN(lat) || isNaN(lon)) {\n        return jsonError('lat and lon required', 400);\n      }\n      const upstream = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${env.OWM_KEY}&units=metric`;\n      const resp = await fetch(upstream);\n      const headers = new Headers(resp.headers);\n      Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n      headers.set('Content-Type', 'application/json');\n      return new Response(resp.body, { status: resp.status, headers });\n    }\n\n    // Route: /onecall?lat=...&lon=... (One Call 3.0 \u2014 current + hourly)\n    if (path === '/onecall') {\n      const lat = url.searchParams.get('lat');\n      const lon = url.searchParams.get('lon');\n      if (!lat || !lon || isNaN(lat) || isNaN(lon)) {\n        return jsonError('lat and lon required', 400);\n      }\n      const upstream = `https://api.openweathermap.org/data/3.0/onecall?lat=${lat}&lon=${lon}&appid=${env.OWM_KEY}&units=metric&exclude=minutely,daily,alerts`;\n      const resp = await fetch(upstream, { cf: { cacheTtl: 600, cacheEverything: true } });\n      const headers = new Headers(resp.headers);\n      Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n      headers.set('Content-Type', 'application/json');\n      return new Response(resp.body, { status: resp.status, headers });\n    }\n\n    // Route: /wx-overview?lat=...&lon=... (One Call 3.0 weather overview)\n    if (path === '/wx-overview') {\n      const lat = url.searchParams.get('lat');\n      const lon = url.searchParams.get('lon');\n      if (!lat || !lon || isNaN(lat) || isNaN(lon)) {\n        return jsonError('lat and lon required', 400);\n      }\n      const upstream = `https://api.openweathermap.org/data/3.0/onecall/overview?lat=${lat}&lon=${lon}&appid=${env.OWM_KEY}&units=metric`;\n      const resp = await fetch(upstream, { cf: { cacheTtl: 1800, cacheEverything: true } });\n      const headers = new Headers(resp.headers);\n      Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n      headers.set('Content-Type', 'application/json');\n      return new Response(resp.body, { status: resp.status, headers });\n    }\n\n    // --- Autorouter.aero API proxy routes ---\n\n    // Route: /ar/metartaf/:icao (GET)\n    const arMetarMatch = path.match(/^\\/ar\\/metartaf\\/([A-Z]{4})$/);\n    if (arMetarMatch && request.method === 'GET') {\n      const icao = arMetarMatch[1];\n      try {\n        const token = await getArToken(env);\n        const resp = await fetch(`https://api.autorouter.aero/v1.0/met/metartaf/${icao}`, {\n          headers: { 'Authorization': 'Bearer ' + token }\n        });\n        const body = await resp.text();\n        return new Response(body, {\n          status: resp.status,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('autorouter metartaf error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /ar/gramet (GET)\n    if (path === '/ar/gramet' && request.method === 'GET') {\n      const waypoints = url.searchParams.get('waypoints') || '';\n      const departuretime = url.searchParams.get('departuretime') || '';\n      const totaleet = url.searchParams.get('totaleet') || '';\n      const altitude = url.searchParams.get('altitude') || '';\n      if (!waypoints || !departuretime || !totaleet || !altitude) {\n        return jsonError('waypoints, departuretime, totaleet, altitude required', 400);\n      }\n      try {\n        const token = await getArToken(env);\n        const qs = new URLSearchParams({ waypoints, departuretime, totaleet, altitude, format: 'png' });\n        const resp = await fetch('https://api.autorouter.aero/v1.0/met/gramet?' + qs.toString(), {\n          headers: { 'Authorization': 'Bearer ' + token }\n        });\n        if (!resp.ok) {\n          const errBody = await resp.text();\n          return new Response(errBody, { status: resp.status, headers: corsHeaders(request) });\n        }\n        const headers = new Headers(resp.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        headers.set('Cache-Control', 'max-age=600');\n        return new Response(resp.body, { status: 200, headers });\n      } catch (e) {\n        return jsonError('autorouter gramet error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /ar/route (POST) \u2014 create a route\n    if (path === '/ar/route' && request.method === 'POST') {\n      const blocked = requireOrigin(request);\n      if (blocked) return blocked;\n      try {\n        const body = await request.json();\n        const token = await getArToken(env);\n        const resp = await fetch('https://api.autorouter.aero/v1.0/router', {\n          method: 'POST',\n          headers: {\n            'Authorization': 'Bearer ' + token,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(body)\n        });\n        const respBody = await resp.text();\n        // Autorouter returns plain-text route ID; wrap in JSON for the client\n        if (resp.ok) {\n          return new Response(JSON.stringify({ id: respBody.trim() }), {\n            status: 200,\n            headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n          });\n        }\n        return new Response(respBody, {\n          status: resp.status,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('autorouter route error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /ar/route/:id/poll (PUT) \u2014 longpoll for route result\n    const arPollMatch = path.match(/^\\/ar\\/route\\/([a-zA-Z0-9-]+)\\/poll$/);\n    if (arPollMatch && request.method === 'PUT') {\n      const blocked = requireOrigin(request);\n      if (blocked) return blocked;\n      const routeId = arPollMatch[1];\n      try {\n        const token = await getArToken(env);\n        const resp = await fetch(`https://api.autorouter.aero/v1.0/router/${routeId}/longpoll`, {\n          method: 'PUT',\n          headers: { 'Authorization': 'Bearer ' + token }\n        });\n        const respBody = await resp.text();\n        return new Response(respBody, {\n          status: resp.status,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('autorouter poll error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /ar/route/:id/stop (PUT)\n    const arStopMatch = path.match(/^\\/ar\\/route\\/([a-zA-Z0-9-]+)\\/stop$/);\n    if (arStopMatch && request.method === 'PUT') {\n      const blocked = requireOrigin(request);\n      if (blocked) return blocked;\n      const routeId = arStopMatch[1];\n      try {\n        const token = await getArToken(env);\n        const resp = await fetch(`https://api.autorouter.aero/v1.0/router/${routeId}/stop`, {\n          method: 'PUT',\n          headers: { 'Authorization': 'Bearer ' + token }\n        });\n        const respBody = await resp.text();\n        return new Response(respBody, {\n          status: resp.status,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('autorouter stop error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /ar/route/:id/close (PUT)\n    const arCloseMatch = path.match(/^\\/ar\\/route\\/([a-zA-Z0-9-]+)\\/close$/);\n    if (arCloseMatch && request.method === 'PUT') {\n      const blocked = requireOrigin(request);\n      if (blocked) return blocked;\n      const routeId = arCloseMatch[1];\n      try {\n        const token = await getArToken(env);\n        const resp = await fetch(`https://api.autorouter.aero/v1.0/router/${routeId}/close`, {\n          method: 'PUT',\n          headers: { 'Authorization': 'Bearer ' + token }\n        });\n        const respBody = await resp.text();\n        return new Response(respBody, {\n          status: resp.status,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('autorouter close error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /ar/airport-docs/:icao (GET) \u2014 airport document list by category\n    const arDocsMatch = path.match(/^\\/ar\\/airport-docs\\/([A-Z]{4})$/);\n    if (arDocsMatch && request.method === 'GET') {\n      const icao = arDocsMatch[1];\n      try {\n        const token = await getArToken(env);\n        const cache = caches.default;\n        const cacheKey = new Request('https://ar-docs-cache/' + icao);\n        let cached = await cache.match(cacheKey);\n        if (cached) {\n          const headers = new Headers(cached.headers);\n          Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n          return new Response(cached.body, { status: 200, headers });\n        }\n        const resp = await fetch(`https://api.autorouter.aero/v1.0/pams/airport/${icao}`, {\n          headers: { 'Authorization': 'Bearer ' + token }\n        });\n        const body = await resp.text();\n        if (resp.ok) {\n          const cacheResp = new Response(body, {\n            headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=86400' }\n          });\n          await cache.put(cacheKey, cacheResp.clone());\n        }\n        return new Response(body, {\n          status: resp.status,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('autorouter airport-docs error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /ar/airport-doc/:id (GET) \u2014 single document PDF\n    const arDocMatch = path.match(/^\\/ar\\/airport-doc\\/([a-zA-Z0-9_-]+)$/);\n    if (arDocMatch && request.method === 'GET') {\n      const docId = arDocMatch[1];\n      try {\n        const token = await getArToken(env);\n        const resp = await fetch(`https://api.autorouter.aero/v1.0/pams/id/${docId}`, {\n          headers: { 'Authorization': 'Bearer ' + token }\n        });\n        if (!resp.ok) {\n          const errBody = await resp.text();\n          return new Response(errBody, { status: resp.status, headers: corsHeaders(request) });\n        }\n        const headers = new Headers(resp.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        return new Response(resp.body, { status: 200, headers });\n      } catch (e) {\n        return jsonError('autorouter airport-doc error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /ar/airport-pdf/:icao (GET) \u2014 airport document PDF package\n    const arPdfMatch = path.match(/^\\/ar\\/airport-pdf\\/([A-Z]{4})$/);\n    if (arPdfMatch && request.method === 'GET') {\n      const icao = arPdfMatch[1];\n      try {\n        const token = await getArToken(env);\n        const resp = await fetch(`https://api.autorouter.aero/v1.0/pams/airport/${icao}/package`, {\n          headers: { 'Authorization': 'Bearer ' + token }\n        });\n        if (!resp.ok) {\n          const errBody = await resp.text();\n          return new Response(errBody, { status: resp.status, headers: corsHeaders(request) });\n        }\n        const headers = new Headers(resp.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        headers.set('Content-Disposition', `inline; filename=\"${icao}_charts.pdf\"`);\n        return new Response(resp.body, { status: 200, headers });\n      } catch (e) {\n        return jsonError('autorouter airport-pdf error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /ar/aircraft (GET) \u2014 list aircraft\n    if (path === '/ar/aircraft' && request.method === 'GET') {\n      try {\n        const token = await getArToken(env);\n        const page = url.searchParams.get('page') || '1';\n        const rows = url.searchParams.get('rows') || '50';\n        const resp = await fetch(`https://api.autorouter.aero/v1.0/aircraft?page=${page}&rows=${rows}`, {\n          headers: { 'Authorization': 'Bearer ' + token }\n        });\n        const body = await resp.text();\n        return new Response(body, {\n          status: resp.status,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('autorouter aircraft error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /briefing (POST) \u2014 AI weather briefing via Anthropic API\n    if (path === '/briefing' && request.method === 'POST') {\n      const blocked = requireOrigin(request);\n      if (blocked) return blocked;\n      try {\n        const body = await request.json();\n        if (!body || !body.type || !body.data) {\n          return jsonError('type and data required', 400);\n        }\n\n        const systemPrompt = `You are an aviation weather briefing assistant for a DA62 pilot operating in Europe. Generate concise, structured pilot weather briefings from the provided data.\n\nFormat your briefing with these sections (use ## headings):\n## Current Conditions (for airport briefings) or ## Departure (for route briefings)\n## Forecast\n## En-Route Weather (route briefings only)\n## Destination (route briefings only)\n## Alternate (route briefings only, if alternate airport designated)\n## NOTAMs (if any provided)\n## Flight Level Recommendation (route briefings only, if FL compare data provided)\n## Summary & Recommendations\n\nGuidelines:\n- Use standard aviation terminology\n- Use metric units (meters visibility, hPa pressure) plus feet for altitude/ceiling\n- Flag: icing risk, strong winds (>15kt) or gusts (>20kt), crosswind components, low visibility (<5km), thunderstorms, turbulence\n- Note runway suitability concerns if runway data is available\n- When FL compare data is provided, identify the optimal flight level for time/fuel and compare against the selected FL. Note headwind/tailwind differences. Recommend an FL if a significantly better option exists (>5 min or >2 gal savings)\n- Keep concise: 200-350 words\n- If insufficient data is provided, state what's missing and brief on what you can`;\n\n        let userContent;\n        if (body.type === 'airport') {\n          const d = body.data;\n          userContent = `Generate a weather briefing for ${d.icao || 'unknown'} (${d.name || 'unknown'}).\nElevation: ${d.elevation || 'unknown'} ft\n\nMETAR: ${d.metar || 'Not available'}\n\nTAF: ${d.taf || 'Not available'}\n\nNOTAMs: ${d.notams && d.notams.length > 0 ? d.notams.map(n => n.id + ': ' + n.text).join('\\n') : 'None available'}`;\n        } else if (body.type === 'route') {\n          const d = body.data;\n          const wpList = (d.waypoints || []).map((wp, i) => {\n            const leg = d.legs && d.legs[i] ? ` \u2192 next leg: ${d.legs[i].dist}nm, hdg ${d.legs[i].hdg}\u00B0, ${d.legs[i].time}h, ${d.legs[i].fuel}gal` : '';\n            return `${wp.code} (${wp.name || ''}, elev ${wp.elevation || '?'} ft)${leg}`;\n          }).join('\\n');\n\n          const enrouteWx = (d.enroute || []).map(s =>\n            `(${s.lat.toFixed(1)},${s.lon.toFixed(1)}): wind ${s.windDir || '?'}\u00B0/${s.windSpd || '?'}kt, ${s.weather || '?'}, temp ${s.temp || '?'}\u00B0C, vis ${s.vis || '?'}m`\n          ).join('\\n');\n\n          const flCompStr = d.flCompare && d.flCompare.length > 0\n            ? d.flCompare.map(f => `FL${f.fl < 100 ? '0' : ''}${f.fl}: ${f.timeH}h, ${f.fuelGal}gal, avg HW ${f.hwKt > 0 ? '+' : ''}${f.hwKt}kt`).join('\\n')\n            : 'Not available';\n\n          userContent = `Generate a route weather briefing.\n\nFlight Level: FL${d.flightLevel || '?'}\nDeparture Time: ${d.departureTime || 'Not set'}\n\nWaypoints:\n${wpList}\n\nDeparture Weather:\nMETAR: ${(d.departure && d.departure.metar) || 'Not available'}\nTAF: ${(d.departure && d.departure.taf) || 'Not available'}\nNOTAMs: ${d.departure && d.departure.notams && d.departure.notams.length > 0 ? d.departure.notams.map(n => n.id + ': ' + n.text).join('\\n') : 'None'}\n\nEn-Route Weather Samples (surface):\n${enrouteWx || 'Not available'}\n\nFL Compare (time/fuel/headwind for FL10-FL200, selected FL${d.flightLevel || '?'}):\n${flCompStr}\n\nDestination:\nTAF: ${(d.destination && d.destination.taf) || 'Not available'}\nNOTAMs: ${d.destination && d.destination.notams && d.destination.notams.length > 0 ? d.destination.notams.map(n => n.id + ': ' + n.text).join('\\n') : 'None'}\n\nAlternate Airport: ${d.alternate ? d.alternate.code : 'None designated'}${d.alternate ? `\nAlternate TAF: ${d.alternate.taf || 'Not available'}\nAlternate NOTAMs: ${d.alternate.notams && d.alternate.notams.length > 0 ? d.alternate.notams.map(n => n.id + ': ' + n.text).join('\\n') : 'None'}` : ''}`;\n        } else {\n          return jsonError('type must be \"airport\" or \"route\"', 400);\n        }\n\n        const anthropicResp = await fetch('https://api.anthropic.com/v1/messages', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'x-api-key': env.ANTHROPIC_API_KEY,\n            'anthropic-version': '2023-06-01'\n          },\n          body: JSON.stringify({\n            model: 'claude-haiku-4-5-20251001',\n            max_tokens: 1024,\n            stream: true,\n            system: systemPrompt,\n            messages: [{ role: 'user', content: userContent }]\n          })\n        });\n\n        if (!anthropicResp.ok) {\n          const errText = await anthropicResp.text();\n          return jsonError('Anthropic API error: ' + anthropicResp.status + ' ' + errText, 502);\n        }\n\n        // Pipe the SSE stream through to the client\n        const headers = new Headers({\n          'Content-Type': 'text/event-stream',\n          'Cache-Control': 'no-cache',\n          ...corsHeaders(request)\n        });\n\n        return new Response(anthropicResp.body, { status: 200, headers });\n      } catch (e) {\n        return jsonError('briefing error: ' + e.message, 500);\n      }\n    }\n\n    // Route: /ar/area-notams?firs=EFIN,ESAA (Autorouter NOTAM by FIR \u2014 airspace activation)\n    if (path === '/ar/area-notams' && request.method === 'GET') {\n      const firs = url.searchParams.get('firs') || '';\n      const firList = firs.split(',').filter(Boolean);\n      if (firList.length === 0 || firList.length > 5 || !firList.every(f => /^[A-Z]{4}$/.test(f))) {\n        return jsonError('firs must be 1-5 valid 4-letter FIR codes', 400);\n      }\n\n      const cache = caches.default;\n      const cacheKey = new Request('https://area-notams-cache/' + firList.join(','));\n      let cached = await cache.match(cacheKey);\n      if (cached) {\n        const headers = new Headers(cached.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        return new Response(cached.body, { status: cached.status, headers });\n      }\n\n      try {\n        const token = await getArToken(env);\n        const now = Math.floor(Date.now() / 1000);\n        const in24h = now + 86400;\n        const itemas = JSON.stringify(firList);\n        // Fetch NOTAMs relevant to airspace activation (Q-code starts with QR, QD, QP for restricted/danger/prohibited)\n        let allRows = [];\n        let offset = 0;\n        let total = Infinity;\n        while (offset < total && offset < 500) {\n          const qs = new URLSearchParams({\n            itemas,\n            offset: String(offset),\n            limit: '100',\n            startvalidity: String(now),\n            endvalidity: String(in24h)\n          });\n          const resp = await fetch('https://api.autorouter.aero/v1.0/notam?' + qs.toString(), {\n            headers: { 'Authorization': 'Bearer ' + token }\n          });\n          if (!resp.ok) {\n            const errText = await resp.text();\n            return jsonError('autorouter notam error: ' + resp.status + ' ' + errText, 502);\n          }\n          const data = await resp.json();\n          total = data.total || 0;\n          if (data.rows) allRows = allRows.concat(data.rows);\n          offset += 100;\n        }\n\n        // Filter to NOTAMs mentioning R/D/P area designators (e.g. EFD117C, EFR93A)\n        const areaNotams = allRows.filter(n => {\n          return /\\b[A-Z]{2}[DRP]\\d{2,}/i.test(n.iteme || '');\n        });\n\n        const body = JSON.stringify({ total: areaNotams.length, rows: areaNotams });\n        const cacheResp = new Response(body, {\n          headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=1800' }\n        });\n        await cache.put(cacheKey, cacheResp.clone());\n        return new Response(body, {\n          status: 200,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('area-notams error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /airspace-tiles/:z/:x/:y.png (OpenAIP tile proxy)\n    const airspaceTileMatch = path.match(/^\\/airspace-tiles\\/(\\d+)\\/(\\d+)\\/(\\d+)\\.png$/);\n    if (airspaceTileMatch) {\n      const [, z, x, y] = airspaceTileMatch;\n      const upstream = `https://a.api.tiles.openaip.net/api/data/openaip/${z}/${x}/${y}.png?apiKey=${env.OPENAIP_KEY}`;\n      const resp = await fetch(upstream, {\n        cf: { cacheTtl: 86400, cacheEverything: true }\n      });\n      const headers = new Headers(resp.headers);\n      Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n      return new Response(resp.body, { status: resp.status, headers });\n    }\n\n    // Route: /airspaces?bbox=...&type=1,2,3 (OpenAIP vector airspace proxy)\n    if (path === '/airspaces') {\n      const bbox = url.searchParams.get('bbox') || '';\n      const type = url.searchParams.get('type') || '1,2,3';\n      if (!bbox || bbox.split(',').length !== 4) {\n        return jsonError('bbox=west,south,east,north required', 400);\n      }\n      // Validate type codes\n      const typeCodes = type.split(',').filter(Boolean);\n      if (!typeCodes.every(t => /^\\d+$/.test(t))) {\n        return jsonError('type must be comma-separated integers', 400);\n      }\n\n      const cache = caches.default;\n      const cacheKey = new Request('https://airspace-cache/' + bbox + '/' + type);\n      let cached = await cache.match(cacheKey);\n      if (cached) {\n        const headers = new Headers(cached.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        return new Response(cached.body, { status: cached.status, headers });\n      }\n\n      try {\n        // Fetch all pages from OpenAIP\n        let allItems = [];\n        let page = 1;\n        let totalPages = 1;\n        while (page <= totalPages) {\n          const qs = new URLSearchParams({ page: String(page), limit: '1000' });\n          // Add each type code separately as the API expects repeated params\n          typeCodes.forEach(t => qs.append('type', t));\n          // bbox format for OpenAIP: west,south,east,north (same as our param)\n          const upstream = `https://api.core.openaip.net/api/airspaces?${qs.toString()}&bbox=${bbox}`;\n          const resp = await fetch(upstream, {\n            headers: { 'x-openaip-api-key': env.OPENAIP_KEY }\n          });\n          if (!resp.ok) {\n            const errText = await resp.text();\n            return jsonError('OpenAIP API error: ' + resp.status + ' ' + errText, 502);\n          }\n          const data = await resp.json();\n          if (data.items) allItems = allItems.concat(data.items);\n          totalPages = data.totalPages || 1;\n          page++;\n          if (page > 20) break; // safety limit\n        }\n\n        const body = JSON.stringify({ items: allItems });\n        const cacheResp = new Response(body, {\n          headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=86400' }\n        });\n        await cache.put(cacheKey, cacheResp.clone());\n        return new Response(body, {\n          status: 200,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('airspace fetch error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /navaids?bbox=west,south,east,north (OpenAIP navaids proxy)\n    if (path === '/navaids') {\n      const bbox = url.searchParams.get('bbox') || '';\n      if (!bbox || bbox.split(',').length !== 4) {\n        return jsonError('bbox=west,south,east,north required', 400);\n      }\n\n      const cache = caches.default;\n      const cacheKey = new Request('https://navaids-cache/' + bbox);\n      let cached = await cache.match(cacheKey);\n      if (cached) {\n        const headers = new Headers(cached.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        return new Response(cached.body, { status: cached.status, headers });\n      }\n\n      try {\n        let allItems = [];\n        let page = 1;\n        let totalPages = 1;\n        while (page <= totalPages) {\n          const upstream = `https://api.core.openaip.net/api/navaids?page=${page}&limit=1000&bbox=${bbox}`;\n          const resp = await fetch(upstream, {\n            headers: { 'x-openaip-api-key': env.OPENAIP_KEY }\n          });\n          if (!resp.ok) {\n            const errText = await resp.text();\n            return jsonError('OpenAIP navaids error: ' + resp.status + ' ' + errText, 502);\n          }\n          const data = await resp.json();\n          if (data.items) allItems = allItems.concat(data.items);\n          totalPages = data.totalPages || 1;\n          page++;\n          if (page > 20) break;\n        }\n\n        const body = JSON.stringify({ items: allItems });\n        const cacheResp = new Response(body, {\n          headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=86400' }\n        });\n        await cache.put(cacheKey, cacheResp.clone());\n        return new Response(body, {\n          status: 200,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('navaids fetch error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /airport?icao=EFHK (OpenAIP single airport lookup)\n    if (path === '/airport') {\n      const icao = (url.searchParams.get('icao') || '').toUpperCase();\n      if (!/^[A-Z]{4}$/.test(icao)) {\n        return jsonError('icao must be a 4-letter ICAO code', 400);\n      }\n\n      const cache = caches.default;\n      const cacheKey = new Request('https://openaip-airport-cache/' + icao);\n      let cached = await cache.match(cacheKey);\n      if (cached) {\n        const headers = new Headers(cached.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        return new Response(cached.body, { status: cached.status, headers });\n      }\n\n      try {\n        const upstream = `https://api.core.openaip.net/api/airports?search=${icao}&limit=5`;\n        const resp = await fetch(upstream, {\n          headers: { 'x-openaip-api-key': env.OPENAIP_KEY }\n        });\n        if (!resp.ok) {\n          const errText = await resp.text();\n          return jsonError('OpenAIP airport error: ' + resp.status + ' ' + errText, 502);\n        }\n        const data = await resp.json();\n        const match = (data.items || []).find(a => a.icaoCode === icao);\n        const body = JSON.stringify(match || null);\n        const cacheResp = new Response(body, {\n          headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=86400' }\n        });\n        await cache.put(cacheKey, cacheResp.clone());\n        return new Response(body, {\n          status: 200,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('OpenAIP airport error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /reporting-points?bbox=west,south,east,north (OpenAIP fixes proxy)\n    if (path === '/reporting-points') {\n      const bbox = url.searchParams.get('bbox') || '';\n      if (!bbox || bbox.split(',').length !== 4) {\n        return jsonError('bbox=west,south,east,north required', 400);\n      }\n\n      const cache = caches.default;\n      const cacheKey = new Request('https://reporting-points-cache/' + bbox);\n      let cached = await cache.match(cacheKey);\n      if (cached) {\n        const headers = new Headers(cached.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        return new Response(cached.body, { status: cached.status, headers });\n      }\n\n      try {\n        let allItems = [];\n        let page = 1;\n        let totalPages = 1;\n        while (page <= totalPages) {\n          const upstream = `https://api.core.openaip.net/api/reporting-points?page=${page}&limit=1000&bbox=${bbox}`;\n          const resp = await fetch(upstream, {\n            headers: { 'x-openaip-api-key': env.OPENAIP_KEY }\n          });\n          if (!resp.ok) {\n            const errText = await resp.text();\n            return jsonError('OpenAIP reporting-points error: ' + resp.status + ' ' + errText, 502);\n          }\n          const data = await resp.json();\n          if (data.items) allItems = allItems.concat(data.items);\n          totalPages = data.totalPages || 1;\n          page++;\n          if (page > 20) break;\n        }\n\n        const body = JSON.stringify({ items: allItems });\n        const cacheResp = new Response(body, {\n          headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=86400' }\n        });\n        await cache.put(cacheKey, cacheResp.clone());\n        return new Response(body, {\n          status: 200,\n          headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n        });\n      } catch (e) {\n        return jsonError('reporting-points fetch error: ' + e.message, 502);\n      }\n    }\n\n    // Route: /sigmet (international SIGMETs as GeoJSON)\n    if (path === '/sigmet') {\n      const cache = caches.default;\n      const cacheKey = new Request('https://sigmet-cache/isigmet');\n      let cached = await cache.match(cacheKey);\n      if (cached) {\n        const headers = new Headers(cached.headers);\n        Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n        return new Response(cached.body, { status: cached.status, headers });\n      }\n      const upstream = 'https://aviationweather.gov/api/data/isigmet?format=geojson';\n      const resp = await fetch(upstream);\n      const body = await resp.text();\n      const cacheResp = new Response(body, {\n        headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=300' }\n      });\n      await cache.put(cacheKey, cacheResp.clone());\n      const headers = new Headers(cacheResp.headers);\n      Object.entries(corsHeaders(request)).forEach(([k, v]) => headers.set(k, v));\n      return new Response(body, { status: 200, headers });\n    }\n\n    return new Response('Not found', { status: 404, headers: corsHeaders(request) });\n  }\n};\n\n// --- Autorouter OAuth2 token helper ---\nasync function getArToken(env) {\n  const cache = caches.default;\n  const cacheKey = new Request('https://ar-token-cache/token');\n  const cached = await cache.match(cacheKey);\n  if (cached) {\n    const data = await cached.json();\n    return data.access_token;\n  }\n\n  const resp = await fetch('https://api.autorouter.aero/v1.0/oauth2/token', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n    body: `grant_type=client_credentials&client_id=${encodeURIComponent(env.AR_EMAIL)}&client_secret=${encodeURIComponent(env.AR_PASSWORD)}`\n  });\n\n  if (!resp.ok) {\n    throw new Error('OAuth token request failed: HTTP ' + resp.status);\n  }\n\n  const data = await resp.json();\n  const token = data.access_token;\n  if (!token) throw new Error('No access_token in OAuth response');\n\n  // Cache for 3500s (token expires at 3600s)\n  const cacheResp = new Response(JSON.stringify({ access_token: token }), {\n    headers: { 'Content-Type': 'application/json', 'Cache-Control': 'max-age=3500' }\n  });\n  await cache.put(cacheKey, cacheResp);\n\n  return token;\n}\n\nconst ALLOWED_ORIGINS = [\n  'https://jjboeder.github.io',\n  'http://localhost',\n  'http://127.0.0.1'\n];\n\nfunction getAllowedOrigin(request) {\n  const origin = request.headers.get('Origin') || '';\n  return ALLOWED_ORIGINS.some(o => origin === o || origin.startsWith(o + ':')) ? origin : null;\n}\n\nfunction corsHeaders(request) {\n  const origin = request ? getAllowedOrigin(request) : null;\n  return {\n    'Access-Control-Allow-Origin': origin || 'https://jjboeder.github.io',\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, OPTIONS',\n    'Access-Control-Allow-Headers': 'Content-Type'\n  };\n}\n\nfunction requireOrigin(request) {\n  const origin = request.headers.get('Origin') || '';\n  const referer = request.headers.get('Referer') || '';\n  const originOk = ALLOWED_ORIGINS.some(o => origin === o || origin.startsWith(o + ':'));\n  const refererOk = ALLOWED_ORIGINS.some(o => referer.startsWith(o));\n  if (!originOk && !refererOk) {\n    return new Response(JSON.stringify({ error: 'Forbidden' }), {\n      status: 403,\n      headers: { 'Content-Type': 'application/json', ...corsHeaders(request) }\n    });\n  }\n  return null;\n}\n\nfunction jsonError(message, status) {\n  return new Response(JSON.stringify({ error: message }), {\n    status: status,\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': 'https://jjboeder.github.io',\n      'Access-Control-Allow-Methods': 'GET, POST, PUT, OPTIONS',\n      'Access-Control-Allow-Headers': 'Content-Type'\n    }\n  });\n}\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/Users/juha/GitHub/Airports/worker/owm-proxy.js\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/Users/juha/.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"/Users/juha/.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"/Users/juha/GitHub/Airports/worker/owm-proxy.js\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"/Users/juha/GitHub/Airports/worker/.wrangler/tmp/bundle-z9upNm/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/Users/juha/.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/common.ts\";\nimport type { WorkerEntrypointConstructor } from \"/Users/juha/GitHub/Airports/worker/.wrangler/tmp/bundle-z9upNm/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/Users/juha/GitHub/Airports/worker/.wrangler/tmp/bundle-z9upNm/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": ["headers", "data", "jsonError"]
}
